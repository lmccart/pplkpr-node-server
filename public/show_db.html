<html>
<head>
  <title>Show Database</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.7.0/bootstrap-table.min.css">
  <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.7.0/bootstrap-table.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>
  <style>
  img {
    max-width: 150px;
  }
  </style>
  <script>
  function timestampFormatter(value) {
    if(value) return moment.unix(value/1000).fromNow();
    else return value;
  }
  function photoFormatter(value) {
    var url = 'https://s3.eu-central-1.amazonaws.com/pplkpr-node/' + value;
    return "<a href='" + url + "'><img src='" + url + "'></a>";
  }
  </script>
</head>
<body>

<h1>Reports</h1>

<table data-toggle="table" data-url="./get_reports" data-height="400" data-sort-name="timestamp" data-sort-order="desc">
  <thead>
      <tr>
          <th data-field="person" data-sortable="true">Person</th>
          <th data-field="name" data-sortable="true">Name</th>
          <th data-field="number" data-sortable="true">Number</th>
          <th data-field="emotion" data-sortable="true">Emotion</th>
          <th data-field="value" data-sortable="true">Value</th>
          <th data-field="lat" data-sortable="true">Latitude</th>
          <th data-field="lon" data-sortable="true">Longitude</th>
          <th data-field="timestamp" data-sortable="true" data-formatter="timestampFormatter">Timestamp</th>
      </tr>
  </thead>
</table>

<h1>People</h1>

<table data-toggle="table" data-url="./get_people" data-height="400" data-sort-name="timestamp" data-sort-order="desc">
  <thead>
      <tr>
          <th data-field="_id" data-sortable="true">Doc ID</th>
          <th data-field="name" data-sortable="true">Name</th>
          <th data-field="normalized_name" data-sortable="true">Normalized Name</th>
          <th data-field="number" data-sortable="true">Number</th>
          <th data-field="normalized_number" data-sortable="true">Normalized Number</th>
          <th data-field="photo" data-sortable="true" data-formatter="photoFormatter">Photo</th>
          <th data-field="timestamp" data-sortable="true" data-formatter="timestampFormatter">Timestamp</th>
      </tr>
  </thead>
</table>

</body>
</html>